<!DOCTYPE html> 
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Gerenciamento de Contas Pessoais</title>
  
  <!-- Meta tags para evitar cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <!-- Google Fonts: Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- CSS do Daterangepicker (com versionamento para forçar recarregamento) -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css?v=1.0.0" />
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js?v=1.0.0"></script>
  
  <!-- Ícones (Font Awesome) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=1.0.0">
  
  <style>
    :root {
      --bg-color: #e6ebf1;
      --card-color: #f0f3f5;
      --primary: #4caf50;
      --text-color: #333;
      --shadow-light: rgba(255, 255, 255, 0.7);
      --shadow-dark: rgba(0, 0, 0, 0.1);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(145deg, #e6ebf1, #f0f3f5);
      color: var(--text-color);
      display: flex;
      min-height: 100vh;
      overflow: hidden;
    }
    
    /* Navegação Lateral */
    aside {
      width: 250px;
      background: var(--card-color);
      padding: 20px;
      box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    aside h2 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 10px;
    }
    
    aside a {
      text-decoration: none;
      color: var(--text-color);
      padding: 10px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.2s ease;
      box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
    }
    
    aside a:hover {
      background: var(--primary);
      color: #fff;
    }
    
    /* Conteúdo Principal */
    main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    
    header {
      margin-bottom: 20px;
    }
    
    header h1 {
      color: var(--primary);
      text-align: center;
      margin-bottom: 20px;
    }
    
    .container {
      background: var(--card-color);
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
    }
    
    button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: none;
      border-radius: 6px;
      background: var(--card-color);
      box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
      font-size: 1rem;
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    button:hover {
      background: var(--primary);
      color: #fff;
      box-shadow: 1px 1px 3px var(--shadow-dark), -1px -1px 3px var(--shadow-light);
    }
    
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: none;
      border-radius: 6px;
      background: var(--card-color);
      box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
      font-size: 1rem;
      color: var(--text-color);
      outline: none;
    }
    
    input:focus, select:focus {
      box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light);
    }
    
    /* Modais e Drawers */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 1000;
    }
    
    .modal-content {
      background: var(--card-color);
      padding: 25px;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
      box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-color);
    }
    
    /* Tabelas e Gráficos */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    
    th {
      background: var(--primary);
      color: #fff;
    }
    
    /* Responsividade */
    @media (max-width: 800px) {
      body { flex-direction: column; }
      aside { width: 100%; flex-direction: row; overflow-x: auto; }
      aside a { flex: 1; justify-content: center; }
      main { padding: 10px; }
    }

    /* Contêiner do Dashboard com posição relativa */
    .dashboard-container {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
      position: relative;
    }

    /* Seletor de Mês/Ano posicionado no canto esquerdo, sobrepondo o resumo */
    #dashboardMonthSelector {
      position: absolute;
      left: 0;
      top: 0;
      width: 17.5%;
      transform: scale(0.56);
      transform-origin: top left;
      z-index: 10;
      background: #f4f4f4;
      padding: 10px;
      border-radius: 10px;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Menu Lateral -->
  <aside>
    <h2><i class="fa-solid fa-wallet"></i> Contas</h2>
    <a href="#" onclick="showSection('dashboardSection')"><i class="fa-solid fa-house"></i> Dashboard</a>
    <a href="#" onclick="showSection('despesasSection')"><i class="fa-solid fa-money-bill-wave"></i> Despesas</a>
    <a href="#" onclick="showSection('relatorioSection')"><i class="fa-solid fa-chart-line"></i> Relatórios</a>
    <a href="#" onclick="showSection('categoriasSection')"><i class="fa-solid fa-tags"></i> Categorias</a>
    <a href="#" onclick="showSection('cartoesSection')"><i class="fa-solid fa-credit-card"></i> Cartões</a>
    <a href="#" onclick="showSection('rendaSection')"><i class="fa-solid fa-user"></i> Renda</a>
    <a href="#" onclick="exportData()"><i class="fa-solid fa-file-export"></i> Exportar Dados</a>
  </aside>
  
  <!-- Conteúdo Principal -->
  <main>
    <header>
      <h1>Sistema de Gerenciamento de Contas</h1>
    </header>
    
    <!-- Dashboard Resumido -->
    <section id="dashboardSection" class="container">
      <h2>Dashboard Resumido</h2>
      <div class="dashboard-container">
        <!-- Seletor de Mês/Ano posicionado à esquerda, sobrepondo o resumo -->
        <div id="dashboardMonthSelector">
          <label for="dashboardMonth">Mês:</label>
          <select id="dashboardMonth">
            <option value="0">Janeiro</option>
            <option value="1">Fevereiro</option>
            <option value="2">Março</option>
            <option value="3">Abril</option>
            <option value="4">Maio</option>
            <option value="5">Junho</option>
            <option value="6">Julho</option>
            <option value="7">Agosto</option>
            <option value="8">Setembro</option>
            <option value="9">Outubro</option>
            <option value="10">Novembro</option>
            <option value="11">Dezembro</option>
          </select>
          <br>
          <label for="dashboardYear">Ano:</label>
          <select id="dashboardYear">
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
            <option value="2027">2027</option>
            <option value="2028">2028</option>
            <option value="2029">2029</option>
            <option value="2030">2030</option>
          </select>
          <br>
          <button onclick="atualizarDashboard()">Atualizar Dashboard</button>
        </div>
        
        <!-- Resumo dos dados (fica à direita, por padrão) -->
        <div id="dashboardResumo" style="flex: 1; display: flex; justify-content: space-around; align-items: center;">
          <div class="dashboard-item" style="text-align: center;">
            <h3>Saldo Atual</h3>
            <p id="saldoAtual">R$ 9374.20</p>
          </div>
          <div class="dashboard-item" style="text-align: center;">
            <h3>Despesas do Mês</h3>
            <p id="despesasMes">R$ 0.00</p>
          </div>
          <div class="dashboard-item" style="text-align: center;">
            <h3>Próximos Vencimentos</h3>
            <p id="proximosVencimentos">0</p>
          </div>
        </div>
      </div>
      
      <canvas id="graficoDespesas" style="max-height: 300px; margin-top: 20px;"></canvas>
      <button onclick="abrirModal('cadastroDespesaModal')">Cadastrar Nova Despesa</button>
    </section>
    
    <!-- Demais seções permanecem inalteradas -->
    <!-- Seção de Despesas -->
    <section id="despesasSection" class="container" style="display: none;">
      <h2>Despesas</h2>
      <button onclick="abrirModal('cadastroDespesaModal')">Cadastrar Despesa</button>
      <button onclick="abrirModal('pagarDespesaModal')">Pagar Despesa</button>
      <button onclick="abrirModal('calendarModal'); renderCalendar()">Calendário</button>
    </section>
    
    <!-- Seção de Relatórios -->
    <section id="relatorioSection" class="container" style="display: none;">
      <h2>Relatórios</h2>
      <div id="filtrosRelatorio" style="display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;">
        <label for="dataRange">Período:</label>
        <input type="text" id="dataRange" placeholder="00/00/0000 - 00/00/0000">
      </div>
      <div id="relatorioMensalContainer"></div>
    </section>
    
    <!-- Seção de Categorias -->
    <section id="categoriasSection" class="container" style="display: none;">
      <h2>Categorias</h2>
      <button onclick="abrirModal('categoriasModal')">Gerenciar Categorias</button>
      <div id="categoriasListaPrincipal"></div>
    </section>
    
    <!-- Seção de Cartões -->
    <section id="cartoesSection" class="container" style="display: none;">
      <h2>Cartões</h2>
      <button onclick="abrirModal('cartaoModal')">Gerenciar Cartões</button>
      <div id="cartoesListaPrincipal"></div>
    </section>
    
    <!-- Seção de Renda -->
    <section id="rendaSection" class="container" style="display: none;">
      <h2>Cadastro de Renda</h2>
      <button onclick="abrirModal('cadastroModal')">Cadastrar Nova Renda</button>
      <button onclick="loadRendas()">Ver Rendas Cadastradas</button>
      <div id="usuariosListaPrincipal"></div>
    </section>
  </main>
  
  <!-- Modais (restante do código permanece inalterado) -->
  <!-- ... -->
  
  <!-- Inclusão de scripts externos e do código JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-database-compat.js"></script>
  
  <script>
    'use strict';
    
    // Variável para controlar a exibição das rendas
    let rendaVisivel = false;
    
    // Variáveis de navegação e calendário
    let currentCalendarMonth = new Date().getMonth();
    let currentCalendarYear = new Date().getFullYear();
    let rangeStart = null;
    let rangeEnd = null;
    
    // Configuração do Firebase (dados originais)
    const firebaseConfig = {
      apiKey: "AIzaSyAG6LktPXGe6F-vSTHV2Y3n95vSwhpXch8",
      authDomain: "controlegasto-df3f1.firebaseapp.com",
      databaseURL: "https://controlegasto-df3f1-default-rtdb.firebaseio.com",
      projectId: "controlegasto-df3f1",
      storageBucket: "controlegasto-df3f1.firebasestorage.app",
      messagingSenderId: "1034936676414",
      appId: "1:1034936676414:web:61c67ce39c3ab71a07a16f",
      measurementId: "G-PTN43GZHGR"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    // Código JavaScript para inicializar e gerenciar o Daterangepicker, dashboard, gráficos, modais, etc.
    // (o restante do código permanece inalterado)
  </script>
</body>
</html>
