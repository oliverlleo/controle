<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FinanControl - Sistema de Gestão Financeira</title>
  
  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/responsive.css">
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
  <!-- Tela de Carregamento -->
  <div id="loading-screen">
    <div class="loading-content">
      <div class="loading-logo">
        <i class="fas fa-wallet"></i>
      </div>
      <h2>FinanControl</h2>
      <p>Carregando...</p>
      <div class="loading-spinner"></div>
    </div>
  </div>

  <!-- Sidebar -->
  <aside id="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <i class="fas fa-wallet"></i>
        <span>FinanControl</span>
      </div>
      <button id="toggleSidebar" class="toggle-sidebar">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    
    <div class="user-profile">
      <div class="user-avatar">
        <img id="userAvatar" src="https://via.placeholder.com/40" alt="Avatar">
      </div>
      <div class="user-info">
        <div id="userName">Usuário</div>
        <div id="userEmail" class="user-email">usuario@email.com</div>
      </div>
    </div>
    
    <nav class="sidebar-nav">
      <ul>
        <li class="active" data-section="dashboard">
          <a href="#dashboard">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li data-section="expenses">
          <a href="#expenses">
            <i class="fas fa-receipt"></i>
            <span>Despesas</span>
          </a>
        </li>
        <li data-section="reports">
          <a href="#reports">
            <i class="fas fa-chart-bar"></i>
            <span>Relatórios</span>
          </a>
        </li>
        <li data-section="categories">
          <a href="#categories">
            <i class="fas fa-tags"></i>
            <span>Categorias</span>
          </a>
        </li>
        <li data-section="cards">
          <a href="#cards">
            <i class="fas fa-credit-card"></i>
            <span>Cartões</span>
          </a>
        </li>
        <li data-section="income">
          <a href="#income">
            <i class="fas fa-money-bill-wave"></i>
            <span>Rendas</span>
          </a>
        </li>
        <li data-section="goals">
          <a href="#goals">
            <i class="fas fa-bullseye"></i>
            <span>Metas</span>
          </a>
        </li>
        <li data-section="budget">
          <a href="#budget">
            <i class="fas fa-chart-pie"></i>
            <span>Orçamento</span>
          </a>
        </li>
        <li data-section="cashflow">
          <a href="#cashflow">
            <i class="fas fa-exchange-alt"></i>
            <span>Fluxo de Caixa</span>
          </a>
        </li>
        <li data-section="settings">
          <a href="#settings">
            <i class="fas fa-cog"></i>
            <span>Configurações</span>
          </a>
        </li>
      </ul>
    </nav>
    
    <div class="sidebar-footer">
      <button id="themeToggle" class="theme-toggle">
        <i class="fas fa-moon"></i>
        <span>Tema Escuro</span>
      </button>
      <button id="logoutBtn" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i>
        <span>Sair</span>
      </button>
    </div>
  </aside>
  
  <!-- Navegação Inferior (Mobile) -->
  <div id="bottom-nav">
    <a href="#dashboard" class="active" data-section="dashboard">
      <i class="fas fa-tachometer-alt"></i>
      <span>Dashboard</span>
    </a>
    <a href="#expenses" data-section="expenses">
      <i class="fas fa-receipt"></i>
      <span>Despesas</span>
    </a>
    <a href="#reports" data-section="reports">
      <i class="fas fa-chart-bar"></i>
      <span>Relatórios</span>
    </a>
    <a href="#more" id="moreBtn">
      <i class="fas fa-ellipsis-h"></i>
      <span>Mais</span>
    </a>
  </div>
  
  <!-- Menu Mais (Mobile) -->
  <div id="moreMenu" class="more-menu">
    <div class="more-menu-header">
      <h3>Mais Opções</h3>
      <button id="closeMoreMenu">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="more-menu-content">
      <a href="#categories" data-section="categories">
        <i class="fas fa-tags"></i>
        <span>Categorias</span>
      </a>
      <a href="#cards" data-section="cards">
        <i class="fas fa-credit-card"></i>
        <span>Cartões</span>
      </a>
      <a href="#income" data-section="income">
        <i class="fas fa-money-bill-wave"></i>
        <span>Rendas</span>
      </a>
      <a href="#goals" data-section="goals">
        <i class="fas fa-bullseye"></i>
        <span>Metas</span>
      </a>
      <a href="#budget" data-section="budget">
        <i class="fas fa-chart-pie"></i>
        <span>Orçamento</span>
      </a>
      <a href="#cashflow" data-section="cashflow">
        <i class="fas fa-exchange-alt"></i>
        <span>Fluxo de Caixa</span>
      </a>
      <div class="more-menu-divider"></div>
      <a href="#settings" data-section="settings">
        <i class="fas fa-cog"></i>
        <span>Configurações</span>
      </a>
      <a href="#" id="mobileThemeToggle">
        <i class="fas fa-moon"></i>
        <span>Tema Escuro</span>
      </a>
      <a href="#" id="mobileLogout" class="text-danger">
        <i class="fas fa-sign-out-alt"></i>
        <span>Sair</span>
      </a>
    </div>
  </div>
  
  <!-- Conteúdo Principal -->
  <main>
    <div class="top-bar">
      <div class="top-bar-left">
        <button id="mobileSidebarToggle" class="mobile-sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <h1 id="pageTitle">Dashboard</h1>
      </div>
      <div class="top-bar-right">
        <button id="notificationsBtn" class="notifications-btn">
          <i class="fas fa-bell"></i>
          <span id="notificationCount" class="notification-badge">0</span>
        </button>
        <div class="user-dropdown">
          <button id="userDropdownBtn" class="user-dropdown-btn">
            <img id="userAvatarSmall" src="https://via.placeholder.com/32" alt="Avatar">
            <span id="userNameSmall">Usuário</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div id="userDropdownMenu" class="user-dropdown-menu">
            <a href="#profile">
              <i class="fas fa-user"></i>
              <span>Perfil</span>
            </a>
            <a href="#settings">
              <i class="fas fa-cog"></i>
              <span>Configurações</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" id="headerLogoutBtn" class="text-danger">
              <i class="fas fa-sign-out-alt"></i>
              <span>Sair</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    
    <div class="content-wrapper">
      <!-- Dashboard -->
      <section id="dashboard-section" class="content-section active">
        <div class="section-header">
          <h2>Dashboard</h2>
          <div class="section-actions">
            <div class="date-filter">
              <button id="prevMonth" class="btn btn-icon">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentMonth">Abril 2025</span>
              <button id="nextMonth" class="btn btn-icon">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="grid">
          <div class="stat-card">
            <div class="stat-card-icon success">
              <i class="fas fa-wallet"></i>
            </div>
            <div class="stat-card-content">
              <div class="stat-card-title">Saldo</div>
              <div id="balance" class="stat-card-value">R$ 0,00</div>
              <div id="balanceTrend" class="stat-card-trend">
                <i class="fas fa-arrow-up"></i> 0%
              </div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-card-icon primary">
              <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="stat-card-content">
              <div class="stat-card-title">Receitas</div>
              <div id="totalIncome" class="stat-card-value">R$ 0,00</div>
              <div id="incomeTrend" class="stat-card-trend">
                <i class="fas fa-arrow-up"></i> 0%
              </div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-card-icon danger">
              <i class="fas fa-receipt"></i>
            </div>
            <div class="stat-card-content">
              <div class="stat-card-title">Despesas</div>
              <div id="totalExpenses" class="stat-card-value">R$ 0,00</div>
              <div id="expensesTrend" class="stat-card-trend">
                <i class="fas fa-arrow-up"></i> 0%
              </div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-card-icon warning">
              <i class="fas fa-credit-card"></i>
            </div>
            <div class="stat-card-content">
              <div class="stat-card-title">Cartões</div>
              <div id="cardExpenses" class="stat-card-value">R$ 0,00</div>
              <div id="cardTrend" class="stat-card-trend">
                <i class="fas fa-arrow-up"></i> 0%
              </div>
            </div>
          </div>
        </div>
        
        <div class="grid">
          <div class="card grid-col-2">
            <div class="card-header">
              <div class="card-title">Gastos por Categoria</div>
              <div class="card-actions">
                <button id="refreshCategoryChart" class="btn btn-icon">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <canvas id="categoryChart" height="250"></canvas>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Despesas Recentes</div>
              <div class="card-actions">
                <button id="refreshRecentExpenses" class="btn btn-icon">
                  <i class="fas fa-sync-alt"></i>
                </button>
                <button class="btn btn-icon" onclick="abrirModal('despesaModal')">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div id="recentExpenses">
                <div class="text-center">
                  <div class="spinner"></div>
                  <p>Carregando despesas...</p>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <a href="#expenses" class="btn btn-outline">Ver Todas</a>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Próximos Vencimentos</div>
              <div class="card-actions">
                <button id="refreshUpcomingDues" class="btn btn-icon">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div id="upcomingDues">
                <div class="text-center">
                  <div class="spinner"></div>
                  <p>Carregando vencimentos...</p>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <a href="#expenses" class="btn btn-outline">Ver Todos</a>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Metas Financeiras</div>
              <div class="card-actions">
                <button id="refreshGoals" class="btn btn-icon">
                  <i class="fas fa-sync-alt"></i>
                </button>
                <button class="btn btn-icon" onclick="abrirModal('goalModal')">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div id="dashboardGoals">
                <div class="text-center">
                  <div class="spinner"></div>
                  <p>Carregando metas...</p>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <a href="#goals" class="btn btn-outline">Ver Todas</a>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Despesas -->
      <section id="expenses-section" class="content-section">
        <div class="section-header">
          <h2>Despesas</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Buscar despesas...">
            </div>
            <button class="btn btn-primary" onclick="abrirModal('despesaModal')">
              <i class="fas fa-plus"></i> Nova Despesa
            </button>
          </div>
        </div>
        
        <div class="filter-bar">
          <div class="filter-group">
            <label for="filterMonth">Mês:</label>
            <select id="filterMonth" class="form-control">
              <option value="0">Janeiro</option>
              <option value="1">Fevereiro</option>
              <option value="2">Março</option>
              <option value="3">Abril</option>
              <option value="4">Maio</option>
              <option value="5">Junho</option>
              <option value="6">Julho</option>
              <option value="7">Agosto</option>
              <option value="8">Setembro</option>
              <option value="9">Outubro</option>
              <option value="10">Novembro</option>
              <option value="11">Dezembro</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="filterYear">Ano:</label>
            <select id="filterYear" class="form-control">
              <option value="2023">2023</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="filterCategory">Categoria:</label>
            <select id="filterCategory" class="form-control">
              <option value="">Todas</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="filterPayment">Pagamento:</label>
            <select id="filterPayment" class="form-control">
              <option value="">Todos</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="pix">PIX</option>
              <option value="cartao">Cartão</option>
              <option value="boleto">Boleto</option>
            </select>
          </div>
          
          <button id="applyFilters" class="btn btn-primary">
            <i class="fas fa-filter"></i> Aplicar
          </button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="table-container">
              <table id="expensesTable">
                <thead>
                  <tr>
                    <th>Descrição</th>
                    <th>Categoria</th>
                    <th>Data</th>
                    <th>Valor</th>
                    <th>Pagamento</th>
                    <th>Status</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="7" class="text-center">
                      <div class="spinner"></div>
                      <p>Carregando despesas...</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="card-footer">
            <div class="pagination">
              <button class="btn btn-sm btn-outline" id="prevPage">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentPage">Página 1</span>
              <button class="btn btn-sm btn-outline" id="nextPage">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Relatórios -->
      <section id="reports-section" class="content-section">
        <div class="section-header">
          <h2>Relatórios</h2>
          <div class="section-actions">
            <div class="date-filter">
              <button id="prevMonthReport" class="btn btn-icon">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentMonthReport">Abril 2025</span>
              <button id="nextMonthReport" class="btn btn-icon">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="grid">
          <div class="card grid-col-2">
            <div class="card-header">
              <div class="card-title">Evolução de Gastos</div>
            </div>
            <div class="card-body">
              <canvas id="expensesChart" height="250"></canvas>
            </div>
          </div>
          
          <div class="card grid-col-2">
            <div class="card-header">
              <div class="card-title">Comparativo Mensal</div>
            </div>
            <div class="card-body">
              <canvas id="monthlyComparisonChart" height="250"></canvas>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Gastos por Categoria</div>
            </div>
            <div class="card-body">
              <canvas id="categoryReportChart" height="250"></canvas>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Previsão de Gastos</div>
            </div>
            <div class="card-body">
              <canvas id="predictionChart" height="250"></canvas>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Categorias -->
      <section id="categories-section" class="content-section">
        <div class="section-header">
          <h2>Categorias</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="abrirModal('categoriaModal')">
              <i class="fas fa-plus"></i> Nova Categoria
            </button>
          </div>
        </div>
        
        <div class="grid" id="categoriesGrid">
          <div class="card">
            <div class="card-body text-center">
              <div class="spinner"></div>
              <p>Carregando categorias...</p>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Cartões -->
      <section id="cards-section" class="content-section">
        <div class="section-header">
          <h2>Cartões</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="abrirModal('cartaoModal')">
              <i class="fas fa-plus"></i> Novo Cartão
            </button>
          </div>
        </div>
        
        <div class="grid" id="cardsGrid">
          <div class="card">
            <div class="card-body text-center">
              <div class="spinner"></div>
              <p>Carregando cartões...</p>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Rendas -->
      <section id="income-section" class="content-section">
        <div class="section-header">
          <h2>Rendas</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="abrirModal('rendaModal')">
              <i class="fas fa-plus"></i> Nova Renda
            </button>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="table-container">
              <table id="incomeTable">
                <thead>
                  <tr>
                    <th>Descrição</th>
                    <th>Data</th>
                    <th>Valor</th>
                    <th>Recorrente</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="5" class="text-center">
                      <div class="spinner"></div>
                      <p>Carregando rendas...</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Metas -->
      <section id="goals-section" class="content-section">
        <div class="section-header">
          <h2>Metas Financeiras</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="abrirModal('goalModal')">
              <i class="fas fa-plus"></i> Nova Meta
            </button>
          </div>
        </div>
        
        <div class="grid" id="goalsGrid">
          <div class="card">
            <div class="card-body text-center">
              <div class="spinner"></div>
              <p>Carregando metas...</p>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Orçamento -->
      <section id="budget-section" class="content-section">
        <div class="section-header">
          <h2>Orçamento Mensal</h2>
          <div class="section-actions">
            <div class="date-filter">
              <button id="prevMonthBudget" class="btn btn-icon">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentMonthBudget">Abril 2025</span>
              <button id="nextMonthBudget" class="btn btn-icon">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <button class="btn btn-primary" onclick="abrirModal('budgetModal')">
              <i class="fas fa-plus"></i> Definir Orçamento
            </button>
          </div>
        </div>
        
        <div class="grid" id="budgetGrid">
          <div class="card">
            <div class="card-body text-center">
              <div class="spinner"></div>
              <p>Carregando orçamentos...</p>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Fluxo de Caixa -->
      <section id="cashflow-section" class="content-section">
        <div class="section-header">
          <h2>Fluxo de Caixa</h2>
          <div class="section-actions">
            <div class="date-filter">
              <button id="prevMonthCashflow" class="btn btn-icon">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentMonthCashflow">Abril 2025</span>
              <button id="nextMonthCashflow" class="btn btn-icon">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="grid">
          <div class="card grid-col-2">
            <div class="card-header">
              <div class="card-title">Fluxo de Caixa Diário</div>
            </div>
            <div class="card-body">
              <canvas id="cashflowChart" height="250"></canvas>
            </div>
          </div>
          
          <div class="card grid-col-2">
            <div class="card-header">
              <div class="card-title">Transações</div>
            </div>
            <div class="card-body">
              <div class="table-container">
                <table id="cashflowTable">
                  <thead>
                    <tr>
                      <th>Data</th>
                      <th>Descrição</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                      <th>Saldo</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="5" class="text-center">
                        <div class="spinner"></div>
                        <p>Carregando transações...</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Configurações -->
      <section id="settings-section" class="content-section">
        <div class="section-header">
          <h2>Configurações</h2>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Perfil</div>
          </div>
          <div class="card-body">
            <form id="profileForm">
              <div class="form-group">
                <input type="text" class="form-control" id="profileName" placeholder=" ">
                <label class="form-label" for="profileName">Nome</label>
              </div>
              
              <div class="form-group">
                <input type="email" class="form-control" id="profileEmail" placeholder=" " disabled>
                <label class="form-label" for="profileEmail">Email</label>
              </div>
              
              <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            </form>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Aparência</div>
          </div>
          <div class="card-body">
            <div class="form-group">
              <label>Tema</label>
              <div class="d-flex mt-2">
                <button id="lightThemeBtn" class="btn btn-outline mr-2">
                  <i class="fas fa-sun"></i> Claro
                </button>
                <button id="darkThemeBtn" class="btn btn-outline">
                  <i class="fas fa-moon"></i> Escuro
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">Segurança</div>
          </div>
          <div class="card-body">
            <form id="passwordForm">
              <div class="form-group">
                <input type="password" class="form-control" id="currentPassword" placeholder=" ">
                <label class="form-label" for="currentPassword">Senha Atual</label>
              </div>
              
              <div class="form-group">
                <input type="password" class="form-control" id="newPassword" placeholder=" ">
                <label class="form-label" for="newPassword">Nova Senha</label>
              </div>
              
              <div class="form-group">
                <input type="password" class="form-control" id="confirmPassword" placeholder=" ">
                <label class="form-label" for="confirmPassword">Confirmar Nova Senha</label>
              </div>
              
              <button type="submit" class="btn btn-primary">Alterar Senha</button>
            </form>
          </div>
        </div>
      </section>
    </div>
  </main>
  
  <!-- Painel de Notificações -->
  <div id="notificationsPanel" class="notifications-panel">
    <div class="notifications-header">
      <h3>Notificações</h3>
      <div class="notifications-actions">
        <button id="closeNotifications" class="btn btn-icon">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
    <div id="notificationsContainer" class="notifications-container">
      <div class="text-center">
        <div class="spinner"></div>
        <p>Carregando notificações...</p>
      </div>
    </div>
  </div>
  
  <!-- Overlay -->
  <div id="overlay" class="overlay"></div>
  
  <!-- Modal de Despesa -->
  <div id="despesaModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Nova Despesa</h2>
        <button class="close" onclick="fecharModal('despesaModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="despesaForm">
          <div class="form-group">
            <input type="text" class="form-control" id="descricao" placeholder=" " required>
            <label class="form-label" for="descricao">Descrição</label>
          </div>
          
          <div class="form-group">
            <input type="number" class="form-control" id="valor" placeholder=" " step="0.01" required>
            <label class="form-label" for="valor">Valor (R$)</label>
          </div>
          
          <div class="form-group">
            <select class="form-control" id="categoria" required>
              <option value="">Selecione uma categoria</option>
            </select>
            <label class="form-label" for="categoria">Categoria</label>
          </div>
          
          <div class="form-group">
            <input type="date" class="form-control" id="dataCompra" required>
            <label class="form-label" for="dataCompra">Data da Compra</label>
          </div>
          
          <div class="form-group">
            <select class="form-control" id="formaPagamento" required>
              <option value="">Selecione a forma de pagamento</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="pix">PIX</option>
              <option value="cartao">Cartão</option>
              <option value="boleto">Boleto</option>
            </select>
            <label class="form-label" for="formaPagamento">Forma de Pagamento</label>
          </div>
          
          <div id="cartaoOptions" style="display: none;">
            <div class="form-group">
              <select class="form-control" id="cartao">
                <option value="">Selecione o cartão</option>
              </select>
              <label class="form-label" for="cartao">Cartão</label>
            </div>
          </div>
          
          <div id="parcelasOptions" style="display: none;">
            <div class="form-group">
              <select class="form-control" id="parcelas">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="4">4x</option>
                <option value="5">5x</option>
                <option value="6">6x</option>
                <option value="7">7x</option>
                <option value="8">8x</option>
                <option value="9">9x</option>
                <option value="10">10x</option>
                <option value="11">11x</option>
                <option value="12">12x</option>
              </select>
              <label class="form-label" for="parcelas">Parcelas</label>
            </div>
          </div>
          
          <div class="form-group">
            <textarea class="form-control" id="observacao" placeholder=" " rows="3"></textarea>
            <label class="form-label" for="observacao">Observação</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="fecharModal('despesaModal')">Cancelar</button>
        <button class="btn btn-primary" onclick="salvarDespesa()">Salvar</button>
      </div>
    </div>
  </div>
  
  <!-- Modal de Meta Financeira -->
  <div id="goalModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Nova Meta Financeira</h2>
        <button class="close" onclick="fecharModal('goalModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="goalForm">
          <div class="form-group">
            <input type="text" class="form-control" id="goalName" placeholder=" " required>
            <label class="form-label" for="goalName">Nome da Meta</label>
          </div>
          
          <div class="form-group">
            <input type="number" class="form-control" id="goalAmount" placeholder=" " step="0.01" required>
            <label class="form-label" for="goalAmount">Valor Alvo (R$)</label>
          </div>
          
          <div class="form-group">
            <input type="date" class="form-control" id="goalDate" required>
            <label class="form-label" for="goalDate">Data Alvo</label>
          </div>
          
          <div class="form-group">
            <select class="form-control" id="goalCategory">
              <option value="">Selecione uma categoria (opcional)</option>
            </select>
            <label class="form-label" for="goalCategory">Categoria</label>
          </div>
          
          <div class="form-group">
            <input type="number" class="form-control" id="goalInitialAmount" placeholder=" " step="0.01">
            <label class="form-label" for="goalInitialAmount">Valor Inicial (R$)</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="fecharModal('goalModal')">Cancelar</button>
        <button class="btn btn-primary" onclick="saveFinancialGoal()">Salvar</button>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script>
    // Configuração do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAG6LktPXGe6F-vSTHV2Y3n95vSwhpXch8",
      authDomain: "controlegasto-df3f1.firebaseapp.com",
      databaseURL: "https://controlegasto-df3f1-default-rtdb.firebaseio.com",
      projectId: "controlegasto-df3f1",
      storageBucket: "controlegasto-df3f1.firebasestorage.app",
      messagingSenderId: "1034936676414",
      appId: "1:1034936676414:web:61c67ce39c3ab71a07a16f",
      measurementId: "G-PTN43GZHGR"
    };
    
    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    
    // Verificar autenticação
    auth.onAuthStateChanged(user => {
      if (user) {
        // Usuário está logado
        updateUserInfo(user);
        initializeApp();
      } else {
        // Usuário não está logado, redirecionar para página de login
        window.location.href = 'login.html';
      }
    });
  </script>
  
  <!-- Scripts Personalizados -->
  <script src="js/financial_features.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
