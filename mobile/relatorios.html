<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Relatórios - Finanças Pessoais</title>
  
  <!-- Meta tags para evitar cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <!-- Google Fonts: Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- Ícones (Font Awesome) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Toastify para notificações -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <!-- ApexCharts para gráficos interativos -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  
  <!-- CSS Mobile -->
  <link rel="stylesheet" href="css/mobile.css">
  
  <!-- Tema claro/escuro -->
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#6200EE">
</head>
<body>
  <!-- Cabeçalho -->
  <header id="app-header">
    <div class="header-content">
      <h1 id="page-title">Relatórios</h1>
      <div class="header-actions">
        <button id="share-btn" class="icon-btn">
          <i class="fas fa-share-alt"></i>
        </button>
      </div>
    </div>
    
    <!-- Seletor de período -->
    <div id="period-selector" class="period-selector-bar">
      <button id="prev-period" class="icon-btn">
        <i class="fas fa-chevron-left"></i>
      </button>
      <div id="current-period-display">Abril 2025</div>
      <button id="next-period" class="icon-btn">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </header>

  <!-- Conteúdo principal -->
  <main id="app-content">
    <!-- Seletor de relatórios -->
    <section id="report-selector" class="card-section">
      <div class="report-tabs">
        <button class="tab-btn active" data-report="overview">Visão Geral</button>
        <button class="tab-btn" data-report="expenses">Despesas</button>
        <button class="tab-btn" data-report="income">Receitas</button>
        <button class="tab-btn" data-report="cashflow">Fluxo de Caixa</button>
      </div>
    </section>

    <!-- Conteúdo do relatório -->
    <section id="report-content">
      <!-- Relatório de visão geral -->
      <div id="overview-report" class="report-section active">
        <div class="report-card">
          <h2>Resumo Financeiro</h2>
          <div class="summary-grid">
            <div class="summary-item">
              <div class="summary-label">Receitas</div>
              <div class="summary-value income">R$ 5.000,00</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Despesas</div>
              <div class="summary-value expenses">R$ 3.500,00</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Saldo</div>
              <div class="summary-value balance">R$ 1.500,00</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Economia</div>
              <div class="summary-value savings">30%</div>
            </div>
          </div>
        </div>
        
        <div class="report-card">
          <h2>Balanço Mensal</h2>
          <div id="balance-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Despesas por Categoria</h2>
          <div id="expenses-category-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Receitas por Categoria</h2>
          <div id="income-category-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Comparativo com Mês Anterior</h2>
          <div class="comparison-list">
            <div class="comparison-item">
              <div class="comparison-label">Receitas</div>
              <div class="comparison-values">
                <div class="comparison-current">R$ 5.000,00</div>
                <div class="comparison-previous">R$ 4.800,00</div>
              </div>
              <div class="comparison-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>4,2%</span>
              </div>
            </div>
            <div class="comparison-item">
              <div class="comparison-label">Despesas</div>
              <div class="comparison-values">
                <div class="comparison-current">R$ 3.500,00</div>
                <div class="comparison-previous">R$ 3.700,00</div>
              </div>
              <div class="comparison-change negative">
                <i class="fas fa-arrow-down"></i>
                <span>5,4%</span>
              </div>
            </div>
            <div class="comparison-item">
              <div class="comparison-label">Saldo</div>
              <div class="comparison-values">
                <div class="comparison-current">R$ 1.500,00</div>
                <div class="comparison-previous">R$ 1.100,00</div>
              </div>
              <div class="comparison-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>36,4%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Relatório de despesas -->
      <div id="expenses-report" class="report-section">
        <div class="report-card">
          <h2>Total de Despesas</h2>
          <div class="big-number">
            <span>R$ 3.500,00</span>
            <div class="number-comparison negative">
              <i class="fas fa-arrow-down"></i>
              <span>5,4% em relação ao mês anterior</span>
            </div>
          </div>
        </div>
        
        <div class="report-card">
          <h2>Despesas por Categoria</h2>
          <div id="expenses-category-detail-chart"></div>
          <div class="category-list">
            <div class="category-item">
              <div class="category-color" style="background-color: #FF6384;"></div>
              <div class="category-name">Moradia</div>
              <div class="category-amount">R$ 1.200,00</div>
              <div class="category-percentage">34,3%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #36A2EB;"></div>
              <div class="category-name">Alimentação</div>
              <div class="category-amount">R$ 800,00</div>
              <div class="category-percentage">22,9%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #FFCE56;"></div>
              <div class="category-name">Transporte</div>
              <div class="category-amount">R$ 500,00</div>
              <div class="category-percentage">14,3%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #4BC0C0;"></div>
              <div class="category-name">Lazer</div>
              <div class="category-amount">R$ 400,00</div>
              <div class="category-percentage">11,4%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #9966FF;"></div>
              <div class="category-name">Saúde</div>
              <div class="category-amount">R$ 300,00</div>
              <div class="category-percentage">8,6%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #FF9F40;"></div>
              <div class="category-name">Outros</div>
              <div class="category-amount">R$ 300,00</div>
              <div class="category-percentage">8,6%</div>
            </div>
          </div>
        </div>
        
        <div class="report-card">
          <h2>Evolução das Despesas</h2>
          <div id="expenses-trend-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Maiores Despesas</h2>
          <div class="transaction-list">
            <div class="transaction-item">
              <div class="transaction-icon">
                <i class="fas fa-home"></i>
              </div>
              <div class="transaction-details">
                <div class="transaction-title">Aluguel</div>
                <div class="transaction-category">Moradia</div>
              </div>
              <div class="transaction-amount">R$ 1.000,00</div>
            </div>
            <div class="transaction-item">
              <div class="transaction-icon">
                <i class="fas fa-shopping-cart"></i>
              </div>
              <div class="transaction-details">
                <div class="transaction-title">Supermercado</div>
                <div class="transaction-category">Alimentação</div>
              </div>
              <div class="transaction-amount">R$ 600,00</div>
            </div>
            <div class="transaction-item">
              <div class="transaction-icon">
                <i class="fas fa-car"></i>
              </div>
              <div class="transaction-details">
                <div class="transaction-title">Combustível</div>
                <div class="transaction-category">Transporte</div>
              </div>
              <div class="transaction-amount">R$ 350,00</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Relatório de receitas -->
      <div id="income-report" class="report-section">
        <div class="report-card">
          <h2>Total de Receitas</h2>
          <div class="big-number">
            <span>R$ 5.000,00</span>
            <div class="number-comparison positive">
              <i class="fas fa-arrow-up"></i>
              <span>4,2% em relação ao mês anterior</span>
            </div>
          </div>
        </div>
        
        <div class="report-card">
          <h2>Receitas por Categoria</h2>
          <div id="income-category-detail-chart"></div>
          <div class="category-list">
            <div class="category-item">
              <div class="category-color" style="background-color: #4CAF50;"></div>
              <div class="category-name">Salário</div>
              <div class="category-amount">R$ 4.000,00</div>
              <div class="category-percentage">80%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #2196F3;"></div>
              <div class="category-name">Freelance</div>
              <div class="category-amount">R$ 600,00</div>
              <div class="category-percentage">12%</div>
            </div>
            <div class="category-item">
              <div class="category-color" style="background-color: #FFC107;"></div>
              <div class="category-name">Investimentos</div>
              <div class="category-amount">R$ 400,00</div>
              <div class="category-percentage">8%</div>
            </div>
          </div>
        </div>
        
        <div class="report-card">
          <h2>Evolução das Receitas</h2>
          <div id="income-trend-chart"></div>
        </div>
      </div>
      
      <!-- Relatório de fluxo de caixa -->
      <div id="cashflow-report" class="report-section">
        <div class="report-card">
          <h2>Fluxo de Caixa Mensal</h2>
          <div id="cashflow-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Saldo Acumulado</h2>
          <div id="accumulated-balance-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Previsão para os Próximos Meses</h2>
          <div id="forecast-chart"></div>
        </div>
        
        <div class="report-card">
          <h2>Análise de Liquidez</h2>
          <div class="liquidity-analysis">
            <div class="liquidity-item">
              <div class="liquidity-label">Índice de Liquidez</div>
              <div class="liquidity-value">1,43</div>
              <div class="liquidity-description">Suas receitas cobrem 143% das suas despesas</div>
            </div>
            <div class="liquidity-item">
              <div class="liquidity-label">Meses de Reserva</div>
              <div class="liquidity-value">3,2</div>
              <div class="liquidity-description">Você pode cobrir 3,2 meses de despesas com suas reservas atuais</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Navegação inferior -->
  <nav id="bottom-nav">
    <a href="index.html" class="nav-item">
      <i class="fas fa-home"></i>
      <span>Início</span>
    </a>
    <a href="despesas.html" class="nav-item">
      <i class="fas fa-chart-pie"></i>
      <span>Despesas</span>
    </a>
    <a href="receitas.html" class="nav-item">
      <i class="fas fa-wallet"></i>
      <span>Receitas</span>
    </a>
    <a href="cartoes.html" class="nav-item">
      <i class="fas fa-credit-card"></i>
      <span>Cartões</span>
    </a>
    <a href="#" class="nav-item active" id="more-menu-btn">
      <i class="fas fa-ellipsis-h"></i>
      <span>Mais</span>
    </a>
  </nav>

  <!-- Menu "Mais" -->
  <div id="more-menu" class="more-menu">
    <div class="more-menu-header">
      <h3>Mais opções</h3>
      <button id="close-more-menu" class="icon-btn">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="more-menu-items">
      <a href="metas.html" class="more-menu-item">
        <i class="fas fa-bullseye"></i>
        <span>Metas</span>
      </a>
      <a href="relatorios.html" class="more-menu-item active">
        <i class="fas fa-chart-line"></i>
        <span>Relatórios</span>
      </a>
      <a href="categorias.html" class="more-menu-item">
        <i class="fas fa-tags"></i>
        <span>Categorias</span>
      </a>
      <a href="perfil.html" class="more-menu-item">
        <i class="fas fa-user"></i>
        <span>Perfil</span>
      </a>
      <a href="configuracoes.html" class="more-menu-item">
        <i class="fas fa-cog"></i>
        <span>Configurações</span>
      </a>
      <button id="logout-btn" class="more-menu-item">
        <i class="fas fa-sign-out-alt"></i>
        <span>Sair</span>
      </button>
    </div>
  </div>

  <!-- Modal de compartilhar -->
  <div id="share-modal" class="modal bottom-sheet">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Compartilhar Relatório</h2>
        <button class="close-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="share-options">
          <div class="share-option" data-format="pdf">
            <div class="share-icon">
              <i class="fas fa-file-pdf"></i>
            </div>
            <span>PDF</span>
          </div>
          <div class="share-option" data-format="excel">
            <div class="share-icon">
              <i class="fas fa-file-excel"></i>
            </div>
            <span>Excel</span>
          </div>
          <div class="share-option" data-format="image">
            <div class="share-icon">
              <i class="fas fa-image"></i>
            </div>
            <span>Imagem</span>
          </div>
          <div class="share-option" data-format="link">
            <div class="share-icon">
              <i class="fas fa-link"></i>
            </div>
            <span>Link</span>
          </div>
        </div>
        
        <div class="share-settings">
          <h3>Configurações</h3>
          
          <div class="form-group">
            <label>Período</label>
            <select id="share-period">
              <option value="current">Mês atual</option>
              <option value="last3">Últimos 3 meses</option>
              <option value="last6">Últimos 6 meses</option>
              <option value="year">Ano atual</option>
              <option value="custom">Personalizado</option>
            </select>
          </div>
          
          <div id="custom-period-settings" class="form-group" style="display: none;">
            <div class="date-range">
              <div class="form-group">
                <label for="share-start-date">De</label>
                <input type="date" id="share-start-date">
              </div>
              <div class="form-group">
                <label for="share-end-date">Até</label>
                <input type="date" id="share-end-date">
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Incluir</label>
            <div class="form-check">
              <input type="checkbox" id="include-overview" checked>
              <label for="include-overview">Visão Geral</label>
            </div>
            <div class="form-check">
              <input type="checkbox" id="include-expenses" checked>
              <label for="include-expenses">Despesas</label>
            </div>
            <div class="form-check">
              <input type="checkbox" id="include-income" checked>
              <label for="include-income">Receitas</label>
            </div>
            <div class="form-check">
              <input type="checkbox" id="include-cashflow" checked>
              <label for="include-cashflow">Fluxo de Caixa</label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button id="generate-report" class="btn btn-primary">Gerar relatório</button>
      </div>
    </div>
  </div>

  <!-- Modal de período -->
  <div id="period-modal" class="modal bottom-sheet">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Selecionar Período</h2>
        <button class="close-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="period-options">
          <button class="period-option active" data-period="month">Este mês</button>
          <button class="period-option" data-period="last-month">Mês passado</button>
          <button class="period-option" data-period="3-months">Últimos 3 meses</button>
          <button class="period-option" data-period="6-months">Últimos 6 meses</button>
          <button class="period-option" data-period="year">Este ano</button>
          <button class="period-option" data-period="last-year">Ano passado</button>
          <button class="period-option" data-period="custom">Personalizado</button>
        </div>
        
        <div id="custom-period" class="custom-period" style="display: none;">
          <div class="date-range">
            <div class="form-group">
              <label for="start-date">De</label>
              <input type="date" id="start-date">
            </div>
            <div class="form-group">
              <label for="end-date">Até</label>
              <input type="date" id="end-date">
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button id="apply-period" class="btn btn-primary">Aplicar</button>
      </div>
    </div>
  </div>

  <!-- Overlay para menus e modais -->
  <div id="overlay"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-database-compat.js"></script>
  
  <!-- Scripts da aplicação -->
  <script src="js/mobile.js"></script>
</body>
</html>
