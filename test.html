<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Contas Pessoais - Teste</title>
    
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/novo/styles-enhanced.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    
    <!-- Scripts de terceiros -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <!-- Configuração do Firebase -->
    <script src="js/firebase-config.js"></script>
    
    <!-- Scripts originais -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/alertas.js"></script>
    <script src="js/previsoes.js"></script>
    
    <!-- Scripts de correção e compatibilidade -->
    <script src="js/novo/bug-fixes.js"></script>
    <script src="js/novo/browser-compatibility.js"></script>
    <script src="js/novo/responsiveness.js"></script>
    <script src="js/novo/form-validation.js"></script>
    
    <!-- Scripts de UI e integração -->
    <script src="js/novo/ui-components.js"></script>
    <script src="js/novo/system-integration.js"></script>
    
    <!-- Scripts de novas funcionalidades -->
    <script src="js/novo/dashboard-enhanced.js"></script>
    <script src="js/novo/financas.js"></script>
    <script src="js/novo/metas.js"></script>
    <script src="js/novo/tendencias-analysis.js"></script>
    <script src="js/novo/orcamento-planner.js"></script>
    <script src="js/novo/relatorios-avancados.js"></script>
    <script src="js/novo/metas-financeiras.js"></script>
    
    <!-- Scripts de teste -->
    <script src="js/novo/system-tests.js"></script>
    <script src="js/novo/test-integration.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Barra lateral -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-wallet"></i>
                    <span>Finanças Pessoais</span>
                </div>
                <button id="menuToggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="sidebar-content">
                <div class="nav-group">
                    <div class="nav-group-title">Principal</div>
                    <a href="#" class="nav-link active" data-section="dashboardSection">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#" class="nav-link" data-section="despesasSection">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Despesas</span>
                    </a>
                    <a href="#" class="nav-link" data-section="rendaSection">
                        <i class="fas fa-hand-holding-usd"></i>
                        <span>Receitas</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">Gerenciamento</div>
                    <a href="#" class="nav-link-with-submenu">
                        <i class="fas fa-chart-line"></i>
                        <span>Finanças</span>
                        <i class="fas fa-chevron-down submenu-icon"></i>
                    </a>
                    <div class="submenu">
                        <a href="#" class="submenu-link" data-section="financasSection">
                            <i class="fas fa-circle-dot submenu-icon"></i>
                            <span>Visão Geral</span>
                        </a>
                        <a href="#" class="submenu-link" data-section="despesasSection">
                            <i class="fas fa-circle-dot submenu-icon"></i>
                            <span>Despesas</span>
                        </a>
                        <a href="#" class="submenu-link" data-section="rendaSection">
                            <i class="fas fa-circle-dot submenu-icon"></i>
                            <span>Receitas</span>
                        </a>
                    </div>
                    
                    <a href="#" class="nav-link" data-section="categoriasSection">
                        <i class="fas fa-tags"></i>
                        <span>Categorias</span>
                    </a>
                    <a href="#" class="nav-link" data-section="cartoesSection">
                        <i class="fas fa-credit-card"></i>
                        <span>Cartões</span>
                    </a>
                    <a href="#" class="nav-link" data-section="metasFinanceirasSection">
                        <i class="fas fa-bullseye"></i>
                        <span>Metas</span>
                    </a>
                    <a href="#" class="nav-link" data-section="orcamentoSection">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Orçamento</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">Análise</div>
                    <a href="#" class="nav-link" data-section="previsaoSection">
                        <i class="fas fa-chart-pie"></i>
                        <span>Previsões</span>
                    </a>
                    <a href="#" class="nav-link" data-section="alertasSection">
                        <i class="fas fa-bell"></i>
                        <span>Alertas</span>
                    </a>
                    <a href="#" class="nav-link" data-section="tendenciasSection">
                        <i class="fas fa-chart-line"></i>
                        <span>Tendências</span>
                    </a>
                    <a href="#" class="nav-link" data-section="relatorioSection">
                        <i class="fas fa-file-alt"></i>
                        <span>Relatórios</span>
                    </a>
                    <a href="#" class="nav-link" data-section="exportarSection">
                        <i class="fas fa-file-export"></i>
                        <span>Exportar Dados</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <a href="#" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sair</span>
                </a>
            </div>
        </div>
        
        <!-- Conteúdo principal -->
        <div class="main-content">
            <header class="top-bar">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-name" id="userName">Usuário</div>
                </div>
                
                <div class="top-bar-actions">
                    <div class="search-box">
                        <input type="text" placeholder="Pesquisar...">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notificationBadge">0</span>
                    </div>
                </div>
            </header>
            
            <main>
                <!-- Seção do Dashboard -->
                <section id="dashboardSection" class="container">
                    <div class="page-header">
                        <h2 class="page-title">Dashboard</h2>
                        <div class="page-actions">
                            <button class="btn btn-primary" onclick="atualizarDashboard()">
                                <i class="fas fa-sync-alt"></i>
                                <span>Atualizar</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-row">
                        <div class="dashboard-col">
                            <div class="dashboard-card">
                                <div class="dashboard-card-header">
                                    <div class="dashboard-card-title">Saldo Atual</div>
                                    <div class="dashboard-card-icon">
                                        <i class="fas fa-wallet"></i>
                                    </div>
                                </div>
                                <div class="dashboard-card-content">
                                    <div id="saldoAtualCard" class="dashboard-card-value">R$ 0,00</div>
                                    <div class="dashboard-card-label">Saldo disponível</div>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-col">
                            <div class="dashboard-card">
                                <div class="dashboard-card-header">
                                    <div class="dashboard-card-title">Despesas do Mês</div>
                                    <div class="dashboard-card-icon">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                                <div class="dashboard-card-content">
                                    <div id="despesasMesCard" class="dashboard-card-value">R$ 0,00</div>
                                    <div class="dashboard-card-label">Total de saídas</div>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-col">
                            <div class="dashboard-card">
                                <div class="dashboard-card-header">
                                    <div class="dashboard-card-title">Receitas do Mês</div>
                                    <div class="dashboard-card-icon">
                                        <i class="fas fa-arrow-down"></i>
                                    </div>
                                </div>
                                <div class="dashboard-card-content">
                                    <div id="receitasMesCard" class="dashboard-card-value">R$ 0,00</div>
                                    <div class="dashboard-card-label">Total de entradas</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-row">
                        <div class="dashboard-col">
                            <div class="dashboard-card">
                                <div class="dashboard-card-header">
                                    <div class="dashboard-card-title">Fluxo de Caixa</div>
                                    <div class="dashboard-card-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                </div>
                                <div class="dashboard-card-content">
                                    <div id="graficoFluxoCaixa" style="height: 300px;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-col">
                            <div class="dashboard-card">
                                <div class="dashboard-card-header">
                                    <div class="dashboard-card-title">Despesas por Categoria</div>
                                    <div class="dashboard-card-icon">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                </div>
                                <div class="dashboard-card-content">
                                    <div id="graficoCategoriasContainer" style="height: 300px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Outras seções serão criadas dinamicamente pelos scripts -->
            </main>
            
            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-text">Sistema de Gerenciamento de Contas Pessoais</div>
                    <div class="footer-version">Versão 2.0</div>
                </div>
            </footer>
        </div>
    </div>
    
    <!-- Console de testes -->
    <div id="testConsole" class="test-console">
        <div class="test-console-header">
            <h3>Console de Testes</h3>
            <button class="test-console-toggle" onclick="toggleTestConsole()">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
        <div class="test-console-content">
            <div id="testResults" class="test-results"></div>
            <div class="test-actions">
                <button class="btn btn-primary" onclick="iniciarTestes()">
                    <i class="fas fa-play"></i> Iniciar Testes
                </button>
                <button class="btn btn-outline" onclick="limparConsole()">
                    <i class="fas fa-trash"></i> Limpar
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Sobrescrever console.log para exibir no console de testes
        const originalConsoleLog = console.log;
        const originalConsoleWarn = console.warn;
        const originalConsoleError = console.error;
        
        console.log = function() {
            const args = Array.from(arguments);
            const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : arg).join(' ');
            
            adicionarMensagemConsole(message, 'log');
            originalConsoleLog.apply(console, arguments);
        };
        
        console.warn = function() {
            const args = Array.from(arguments);
            const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : arg).join(' ');
            
            adicionarMensagemConsole(message, 'warn');
            originalConsoleWarn.apply(console, arguments);
        };
        
        console.error = function() {
            const args = Array.from(arguments);
            const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : arg).join(' ');
            
            adicionarMensagemConsole(message, 'error');
            originalConsoleError.apply(console, arguments);
        };
        
        function adicionarMensagemConsole(mensagem, tipo) {
 
(Content truncated due to size limit. Use line ranges to read in chunks)