<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Sistema de Gerenciamento de Contas Pessoais - Mobile</title>
  
  <!-- Meta tags para evitar cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <!-- Google Fonts: Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  
  <!-- CSS do Daterangepicker -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css?v=1.0.0" />
  
  <!-- ApexCharts para gráficos interativos -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  
  <!-- Toastify para notificações -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <!-- Ícones (Font Awesome) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=1.0.0">
  
  <!-- CSS Mobile (versão melhorada) -->
  <link rel="stylesheet" href="css/mobile.css">
  
  <style>
    /* Sobrescrever estilos específicos para garantir que o mobile seja aplicado */
    body {
      font-family: 'Roboto', sans-serif !important;
      background: var(--bg-color) !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow-x: hidden !important;
    }
  </style>
</head>
<body class="mobile-body">
  <!-- Cabeçalho Mobile -->
  <header class="mobile-header">
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
      <i class="fas fa-bars"></i>
    </button>
    <h1 class="mobile-title">Sistema de Contas</h1>
    <button class="mobile-user-btn" id="mobileUserBtn" aria-label="Perfil">
      <i class="fas fa-user"></i>
    </button>
  </header>

  <!-- Menu de Navegação Mobile -->
  <nav class="mobile-nav" id="mobileNav">
    <div class="mobile-nav-header">
      <h2><i class="fa-solid fa-wallet"></i> Contas</h2>
      <button class="mobile-nav-close" id="mobileNavClose" aria-label="Fechar menu">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="mobile-user-info" id="mobileUserInfo">
      <!-- Preenchido dinamicamente -->
    </div>
    <div class="mobile-nav-links">
      <a href="#" class="mobile-nav-link active" data-section="dashboardSection">
        <i class="fa-solid fa-house"></i>
        <span>Dashboard</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="despesasSection">
        <i class="fa-solid fa-money-bill-wave"></i>
        <span>Despesas</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="relatorioIntegradoSection">
        <i class="fa-solid fa-chart-line"></i>
        <span>Relatórios & Previsões</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="inteligenciaFinanceiraSection">
        <i class="fa-solid fa-brain"></i>
        <span>Inteligência Financeira</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="metasFinanceirasSection">
        <i class="fa-solid fa-bullseye"></i>
        <span>Metas</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="configuracoesSection">
        <i class="fa-solid fa-cog"></i>
        <span>Configurações</span>
      </a>
      <a href="#" class="mobile-nav-link" data-action="exportData">
        <i class="fa-solid fa-file-export"></i>
        <span>Exportar</span>
      </a>
      <a href="#" class="mobile-nav-link" data-section="alertasSection">
        <i class="fa-solid fa-bell"></i>
        <span>Alertas</span>
      </a>
      <a href="#" class="mobile-nav-link mobile-logout" id="mobileLogout">
        <i class="fa-solid fa-sign-out-alt"></i>
        <span>Sair</span>
      </a>
    </div>
  </nav>

  <!-- Overlay para quando o menu está aberto -->
  <div class="mobile-overlay" id="mobileOverlay"></div>

  <!-- Conteúdo Principal Mobile -->
  <main class="mobile-main">
    <!-- Dashboard Mobile -->
    <section id="mobileDashboardSection" class="mobile-section active">
      <div class="mobile-section-header">
        <h2>Dashboard</h2>
        <div class="mobile-date-selector">
          <select id="mobileDashboardMonth" class="mobile-select">
            <option value="0">Janeiro</option>
            <option value="1">Fevereiro</option>
            <option value="2">Março</option>
            <option value="3">Abril</option>
            <option value="4">Maio</option>
            <option value="5">Junho</option>
            <option value="6">Julho</option>
            <option value="7">Agosto</option>
            <option value="8">Setembro</option>
            <option value="9">Outubro</option>
            <option value="10">Novembro</option>
            <option value="11">Dezembro</option>
          </select>
          <select id="mobileDashboardYear" class="mobile-select">
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
            <option value="2027">2027</option>
            <option value="2028">2028</option>
            <option value="2029">2029</option>
            <option value="2030">2030</option>
          </select>
          <button class="mobile-btn mobile-btn-primary" id="mobileUpdateDashboard">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
      </div>
      
      <div class="mobile-cards">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Saldo Atual</div>
            <div class="mobile-card-icon">
              <i class="fas fa-wallet"></i>
            </div>
          </div>
          <div class="mobile-card-value" id="mobileSaldoAtual">R$ 0,00</div>
          <div class="mobile-card-label">Disponível para uso</div>
        </div>
        
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Despesas do Mês</div>
            <div class="mobile-card-nav">
              <button class="mobile-btn-icon" id="mobilePrevMonth" aria-label="Mês anterior">
                <i class="fas fa-chevron-left"></i>
              </button>
              <button class="mobile-btn-icon" id="mobileNextMonth" aria-label="Próximo mês">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <div class="mobile-card-value" id="mobileDespesasMes">R$ 0,00</div>
          <div class="mobile-card-label" id="mobileDespesasMesTitle">Mês de 2025</div>
        </div>
        
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Próximos Vencimentos</div>
            <div class="mobile-card-icon">
              <i class="fas fa-calendar-alt"></i>
            </div>
          </div>
          <div class="mobile-card-value" id="mobileProximosVencimentos">0</div>
          <div class="mobile-card-label">Dias até o próximo vencimento</div>
        </div>
      </div>
      
      <div class="mobile-chart-container">
        <h3 class="mobile-chart-title">Análise de Despesas</h3>
        <div id="mobileGraficoDespesas" class="mobile-chart"></div>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Despesas do Mês</h3>
        <div id="mobileListaDespesasMes" class="mobile-despesas-lista"></div>
      </div>
      
      <button class="mobile-btn-float" id="mobileAddDespesa" aria-label="Adicionar despesa">
        <i class="fas fa-plus"></i>
      </button>
    </section>

    <!-- Despesas Mobile -->
    <section id="mobileDespesasSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Despesas</h2>
        <div class="mobile-action-buttons">
          <button class="mobile-btn mobile-btn-primary" id="mobileAddDespesaBtn">
            <i class="fas fa-plus"></i>
            <span>Nova</span>
          </button>
          <button class="mobile-btn mobile-btn-success" id="mobilePagarDespesaBtn">
            <i class="fas fa-check"></i>
            <span>Pagar</span>
          </button>
        </div>
      </div>
      
      <div class="mobile-filters">
        <input type="text" id="mobileFiltroDescricao" class="mobile-form-control" placeholder="Filtrar por descrição">
        <button class="mobile-btn-icon" id="mobileFiltrarBtn" aria-label="Filtrar">
          <i class="fas fa-filter"></i>
        </button>
      </div>
      
      <div class="mobile-filters">
        <select id="mobileFiltroStatus" class="mobile-select">
          <option value="todos">Todos os status</option>
          <option value="pendente">Pendentes</option>
          <option value="pago">Pagas</option>
        </select>
        <select id="mobileFiltroMes" class="mobile-select">
          <option value="todos">Todos os meses</option>
          <option value="0">Janeiro</option>
          <option value="1">Fevereiro</option>
          <option value="2">Março</option>
          <option value="3">Abril</option>
          <option value="4">Maio</option>
          <option value="5">Junho</option>
          <option value="6">Julho</option>
          <option value="7">Agosto</option>
          <option value="8">Setembro</option>
          <option value="9">Outubro</option>
          <option value="10">Novembro</option>
          <option value="11">Dezembro</option>
        </select>
      </div>
      
      <button class="mobile-btn mobile-btn-outline" id="mobileCalendarBtn">
        <i class="fas fa-calendar-alt"></i>
        <span>Calendário</span>
      </button>
      
      <div class="mobile-loading">
        <i class="fas fa-spinner fa-spin"></i> Carregando despesas...
      </div>
      
      <div id="mobileDespesasList" class="mobile-despesas-lista"></div>
      
      <div class="mobile-empty-state" style="display: none;">
        <i class="fas fa-receipt"></i>
        <h3>Nenhuma despesa encontrada</h3>
        <p>Adicione sua primeira despesa clicando no botão "Nova"</p>
      </div>
    </section>
    
    <!-- Relatórios Mobile -->
    <section id="mobileRelatorioIntegradoSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Relatórios & Previsões</h2>
      </div>
      
      <div class="mobile-action-buttons">
        <button class="mobile-btn mobile-btn-primary" data-tab="mobileRelatorioTab">
          <i class="fas fa-chart-bar"></i>
          <span>Relatórios</span>
        </button>
        <button class="mobile-btn mobile-btn-primary" data-tab="mobilePrevisaoTab">
          <i class="fas fa-calculator"></i>
          <span>Previsões</span>
        </button>
        <button class="mobile-btn mobile-btn-primary" data-tab="mobileCategoriasTab">
          <i class="fas fa-tags"></i>
          <span>Categorias</span>
        </button>
      </div>
      
      <div class="mobile-form-group">
        <input type="text" id="mobileDateRange" class="mobile-form-control" placeholder="Selecione o período">
      </div>
      
      <div class="mobile-chart-container">
        <h3 class="mobile-chart-title">Resumo Financeiro</h3>
        <div id="mobileRelatorioMensalChart" class="mobile-chart"></div>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Total de Despesas</h3>
        <div class="mobile-card-value" id="mobileTotalDespesas">R$ 0,00</div>
        <h3 class="mobile-list-title">Média Mensal</h3>
        <div class="mobile-card-value" id="mobileMediaMensal">R$ 0,00</div>
      </div>
      
      <div class="mobile-chart-container">
        <h3 class="mobile-chart-title">Tendência de Gastos</h3>
        <div id="mobileGraficoPrevisao" class="mobile-chart"></div>
      </div>
      
      <button class="mobile-btn mobile-btn-primary mobile-btn-block" id="mobileGerarPrevisoes">
        <i class="fas fa-calculator"></i> Gerar Previsões
      </button>
    </section>
    
    <!-- Inteligência Financeira Mobile -->
    <section id="mobileInteligenciaFinanceiraSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Inteligência Financeira</h2>
      </div>
      
      <div class="mobile-inteligencia-header" id="mobileInteligenciaHeader">
        <div class="mobile-inteligencia-icon">
          <i class="fas fa-brain"></i>
        </div>
        <div class="mobile-inteligencia-title">
          <h3>Análise Financeira</h3>
          <p>Sua saúde financeira está <span id="mobileSaudeFinanceira">boa</span></p>
        </div>
      </div>
      
      <div class="mobile-cards">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Índice de Economia</div>
          </div>
          <div class="mobile-card-value" id="mobileIndiceEconomia">0%</div>
        </div>
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Gastos Essenciais</div>
          </div>
          <div class="mobile-card-value" id="mobileGastosEssenciais">0%</div>
        </div>
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-card-title">Gastos Supérfluos</div>
          </div>
          <div class="mobile-card-value" id="mobileGastosSuperfluos">0%</div>
        </div>
      </div>
      
      <div class="mobile-chart-container">
        <h3 class="mobile-chart-title">Evolução de Gastos</h3>
        <div id="mobileGraficoEvolucao" class="mobile-chart"></div>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Recomendações</h3>
        <div id="mobileInsightsList" class="mobile-despesas-lista"></div>
      </div>
    </section>
    
    <!-- Metas Financeiras Mobile -->
    <section id="mobileMetasFinanceirasSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Metas Financeiras</h2>
        <button class="mobile-btn mobile-btn-primary" id="mobileAddMetaBtn">
          <i class="fas fa-plus"></i>
          <span>Nova Meta</span>
        </button>
      </div>
      
      <div id="mobileMetasList" class="mobile-despesas-lista"></div>
      
      <div id="mobileMetasEmpty" class="mobile-empty-state">
        <i class="fas fa-bullseye"></i>
        <h3>Nenhuma meta cadastrada</h3>
        <p>Adicione metas financeiras para acompanhar seu progresso</p>
      </div>
    </section>
    
    <!-- Configurações Mobile -->
    <section id="mobileConfiguracoesSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Configurações</h2>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Perfil</h3>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileNome">Nome</label>
          <input type="text" id="mobileNome" class="mobile-form-control" placeholder="Seu nome">
        </div>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileEmail">Email</label>
          <input type="email" id="mobileEmail" class="mobile-form-control" placeholder="Seu email" readonly>
        </div>
        <button class="mobile-btn mobile-btn-primary mobile-btn-block" id="mobileSalvarPerfil">
          <i class="fas fa-save"></i>
          <span>Salvar Alterações</span>
        </button>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Segurança</h3>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileSenhaAtual">Senha Atual</label>
          <input type="password" id="mobileSenhaAtual" class="mobile-form-control" placeholder="Sua senha atual">
        </div>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileNovaSenha">Nova Senha</label>
          <input type="password" id="mobileNovaSenha" class="mobile-form-control" placeholder="Nova senha">
        </div>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileConfirmarSenha">Confirmar Senha</label>
          <input type="password" id="mobileConfirmarSenha" class="mobile-form-control" placeholder="Confirme a nova senha">
        </div>
        <button class="mobile-btn mobile-btn-primary mobile-btn-block" id="mobileAlterarSenha">
          <i class="fas fa-lock"></i>
          <span>Alterar Senha</span>
        </button>
      </div>
      
      <div class="mobile-list-container">
        <h3 class="mobile-list-title">Preferências</h3>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileMoeda">Moeda</label>
          <select id="mobileMoeda" class="mobile-select">
            <option value="BRL">Real (R$)</option>
            <option value="USD">Dólar ($)</option>
            <option value="EUR">Euro (€)</option>
          </select>
        </div>
        <div class="mobile-form-group">
          <label class="mobile-form-label" for="mobileNotificacoes">Notificações</label>
          <div class="mobile-toggle">
            <input type="checkbox" id="mobileNotificacoes" checked>
            <label for="mobileNotificacoes"></label>
          </div>
        </div>
        <button class="mobile-btn mobile-btn-primary mobile-btn-block" id="mobileSalvarPreferencias">
          <i class="fas fa-save"></i>
          <span>Salvar Preferências</span>
        </button>
      </div>
    </section>
    
    <!-- Alertas Mobile -->
    <section id="mobileAlertasSection" class="mobile-section">
      <div class="mobile-section-header">
        <h2>Alertas</h2>
        <button class="mobile-btn mobile-btn-primary" id="mobileAddAlertaBtn">
          <i class="fas fa-plus"></i>
          <span>Novo Alerta</span>
        </button>
      </div>
      
      <div id="mobileAlertasList" class="mobile-despesas-lista"></div>
      
      <div id="mobileAlertasEmpty" class="mobile-empty-state">
        <i class="fas fa-bell"></i>
        <h3>Nenhum alerta configurado</h3>
        <p>Configure alertas para ser notificado sobre vencimentos e limites</p>
      </div>
    </section>
  </main>

  <!-- Firebase App (the core Firebase SDK) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <!-- Firebase Auth -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <!-- Firebase Database -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- Inicialização do Firebase -->
  <script>
    // Configuração do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAG6LktPXGe6F-vSTHV2Y3n95vSwhpXch8",
      authDomain: "controlegasto-df3f1.firebaseapp.com",
      databaseURL: "https://controlegasto-df3f1-default-rtdb.firebaseio.com",
      projectId: "controlegasto-df3f1",
      storageBucket: "controlegasto-df3f1.firebasestorage.app",
      messagingSenderId: "1034936676414",
      appId: "1:1034936676414:web:61c67ce39c3ab71a07a16f",
      measurementId: "G-PTN43GZHGR"
    };
    
    // Inicialização do Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
  </script>

  <!-- Função para exibir notificações toast -->
  <script>
    function exibirToast(mensagem, tipo = 'info') {
      let backgroundColor = '#4361ee'; // info (azul)
      
      if (tipo === 'success') {
        backgroundColor = '#4cc9f0'; // success (azul claro)
      } else if (tipo === 'error') {
        backgroundColor = '#f72585'; // error (rosa)
      } else if (tipo === 'warning') {
        backgroundColor = '#f8961e'; // warning (laranja)
      }
      
      Toastify({
        text: mensagem,
        duration: 3000,
        close: true,
        gravity: "top",
        position: "center",
        backgroundColor: backgroundColor,
        stopOnFocus: true
      }).showToast();
    }
    
    // Expor a função globalmente para uso em outros scripts
    window.exibirToast = exibirToast;
  </script>

  <!-- Script Mobile (nova versão) -->
  <script src="js/mobile.js"></script>
</body>
</html>
